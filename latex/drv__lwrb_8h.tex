\hypertarget{drv__lwrb_8h}{}\doxysection{/\+Users/jeremywolfe/\+Documents/\+STM32\+Cube\+IDE/\+Autodrone32/\+Src/drv/drv\+\_\+lwrb.h File Reference}
\label{drv__lwrb_8h}\index{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/drv/drv\_lwrb.h@{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/drv/drv\_lwrb.h}}


This file is part of Lw\+RB -\/ Lightweight ring buffer library.  


{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structlwrb}{lwrb}}
\begin{DoxyCompactList}\small\item\em Buffer structure. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{group___l_w_r_b_gad5848c378fb79c0d40c864d48b8ead75}{LWRB\+\_\+\+VOLATILE}}~/$\ast$ volatile $\ast$/
\begin{DoxyCompactList}\small\item\em Enable buffer structure pointer parameters as volatile To use this feature, uncomment keyword below, or define in global compiler settings. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group___l_w_r_b_ga47e17337998fd2acc3a3cf72a85d25ef}{LWRB\+\_\+\+USE\+\_\+\+MAGIC}}~1
\begin{DoxyCompactList}\small\item\em Adds 2 magic words to make sure if memory is corrupted application can detect wrong data pointer and maximum size. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void($\ast$ \mbox{\hyperlink{group___l_w_r_b_ga12e63728273a00ed1ad387e12ad6fd63}{lwrb\+\_\+evt\+\_\+fn}}) (struct \mbox{\hyperlink{structlwrb}{lwrb}} $\ast$buff, \mbox{\hyperlink{group___l_w_r_b_ga01ad033c3c5d1ea85fd974dd65230f9f}{lwrb\+\_\+evt\+\_\+type\+\_\+t}} evt, size\+\_\+t bp)
\begin{DoxyCompactList}\small\item\em Event callback function type. \end{DoxyCompactList}\item 
typedef struct \mbox{\hyperlink{structlwrb}{lwrb}} \mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Buffer structure. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{group___l_w_r_b_ga01ad033c3c5d1ea85fd974dd65230f9f}{lwrb\+\_\+evt\+\_\+type\+\_\+t}} \{ \mbox{\hyperlink{group___l_w_r_b_gga01ad033c3c5d1ea85fd974dd65230f9fade2f2fc3cff152f33a5a9d2e1f9d55be}{LWRB\+\_\+\+EVT\+\_\+\+READ}}
, \mbox{\hyperlink{group___l_w_r_b_gga01ad033c3c5d1ea85fd974dd65230f9faab9be92074e7ae3f49af87674d86fc69}{LWRB\+\_\+\+EVT\+\_\+\+WRITE}}
, \mbox{\hyperlink{group___l_w_r_b_gga01ad033c3c5d1ea85fd974dd65230f9fadfe5bb22babadf6978117902a810d5c3}{LWRB\+\_\+\+EVT\+\_\+\+RESET}}
 \}
\begin{DoxyCompactList}\small\item\em Event type for buffer operations. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga7906eb420b729bca01a6e1e4b318b432}{lwrb\+\_\+init}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, void $\ast$buffdata, size\+\_\+t size)
\begin{DoxyCompactList}\small\item\em Initialize buffer handle to default values with size and buffer data array. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___l_w_r_b_gaed50b99bdd5e8d10ae00658870a055e4}{lwrb\+\_\+is\+\_\+ready}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Check if buff is initialized and ready to use. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___l_w_r_b_ga0f0ec387056586a22ca37d7bd1ca6999}{lwrb\+\_\+free}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Free buffer memory. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___l_w_r_b_ga8d50549538628161b6c4c6ee8289136d}{lwrb\+\_\+reset}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Resets buffer to default values. Buffer size is not modified. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___l_w_r_b_ga060fa8779e38b907ac5aa1f9fa07f3a3}{lwrb\+\_\+set\+\_\+evt\+\_\+fn}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, \mbox{\hyperlink{group___l_w_r_b_ga12e63728273a00ed1ad387e12ad6fd63}{lwrb\+\_\+evt\+\_\+fn}} fn)
\begin{DoxyCompactList}\small\item\em Set event function callback for different buffer operations. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_gac3674a7ac150c42ef96bd52667356cdb}{lwrb\+\_\+write}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, const void $\ast$data, size\+\_\+t btw)
\begin{DoxyCompactList}\small\item\em Write data to buffer. Copies data from {\ttfamily data} array to buffer and marks buffer as full for maximum {\ttfamily btw} number of bytes. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga894a7cb3b63e8b47e56ac91436de1c1c}{lwrb\+\_\+read}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, void $\ast$data, size\+\_\+t btr)
\begin{DoxyCompactList}\small\item\em Read data from buffer. Copies data from buffer to {\ttfamily data} array and marks buffer as free for maximum {\ttfamily btr} number of bytes. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga4c258cc0b134a8e98e875bab5974a972}{lwrb\+\_\+peek}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, size\+\_\+t skip\+\_\+count, void $\ast$data, size\+\_\+t btp)
\begin{DoxyCompactList}\small\item\em Read from buffer without changing read pointer (peek only) \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga774b76c9415642cb8bced066db8626fa}{lwrb\+\_\+get\+\_\+free}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Get available size in buffer for write operation. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_gac7d9434f9cc89380211ebb222c87dc80}{lwrb\+\_\+get\+\_\+full}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Get number of bytes currently available in buffer. \end{DoxyCompactList}\item 
void $\ast$ \mbox{\hyperlink{group___l_w_r_b_ga7caa6f92eacf2e20b7a12c359ce1e1fa}{lwrb\+\_\+get\+\_\+linear\+\_\+block\+\_\+read\+\_\+address}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Get linear address for buffer for fast read. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_gabc3c54094858e86cb283a21bca5a1815}{lwrb\+\_\+get\+\_\+linear\+\_\+block\+\_\+read\+\_\+length}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Get length of linear block address before it overflows for read operation. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga10bbdb5343d3cd5a933996a0ce8c7a09}{lwrb\+\_\+skip}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, size\+\_\+t len)
\begin{DoxyCompactList}\small\item\em Skip (ignore; advance read pointer) buffer data Marks data as read in the buffer and increases free memory for up to {\ttfamily len} bytes. \end{DoxyCompactList}\item 
void $\ast$ \mbox{\hyperlink{group___l_w_r_b_gad8f5457e7da612e8dd55cd99472641be}{lwrb\+\_\+get\+\_\+linear\+\_\+block\+\_\+write\+\_\+address}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Get linear address for buffer for fast read. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga36f5716f2255914f3c7b97a83607366b}{lwrb\+\_\+get\+\_\+linear\+\_\+block\+\_\+write\+\_\+length}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Get length of linear block address before it overflows for write operation. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga4d726d2aee3d4db6d02de0fc6b489f0c}{lwrb\+\_\+advance}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, size\+\_\+t len)
\begin{DoxyCompactList}\small\item\em Advance write pointer in the buffer. Similar to skip function but modifies write pointer instead of read. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file is part of Lw\+RB -\/ Lightweight ring buffer library. 

\begin{DoxyAuthor}{Author}
Tilen MAJERLE \href{mailto:tilen@majerle.eu}{\texttt{ tilen@majerle.\+eu}} 
\end{DoxyAuthor}


Definition in file \mbox{\hyperlink{drv__lwrb_8h_source}{drv\+\_\+lwrb.\+h}}.

