\hypertarget{compute__axis__commands_8c_source}{}\doxysection{compute\+\_\+axis\+\_\+commands.\+c}
\label{compute__axis__commands_8c_source}\index{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/motion/compute\_axis\_commands.c@{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/motion/compute\_axis\_commands.c}}
\mbox{\hyperlink{compute__axis__commands_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00009}00009 \textcolor{comment}{/* Includes */}}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00010}00010 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{board_8h}{board.h}}"{}}}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00012}00012 \textcolor{comment}{/* Global Variables */}}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00013}\mbox{\hyperlink{compute__axis__commands_8c_aa2d7eed0bc462ac7393d0def9c484b5e}{00013}} \textcolor{keywordtype}{float}   \mbox{\hyperlink{compute__axis__commands_8c_aa2d7eed0bc462ac7393d0def9c484b5e}{attCmd}}[3];}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00014}\mbox{\hyperlink{compute__axis__commands_8c_ab07bd323d95ccecc4ad892c23b921712}{00014}} \textcolor{keywordtype}{float}   \mbox{\hyperlink{compute__axis__commands_8c_ab07bd323d95ccecc4ad892c23b921712}{attPID}}[3];}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00015}\mbox{\hyperlink{compute__axis__commands_8c_ab77481ff9ad18ebb1f89ab1946ca7dae}{00015}} \textcolor{keywordtype}{float}   \mbox{\hyperlink{compute__axis__commands_8c_ab77481ff9ad18ebb1f89ab1946ca7dae}{ratePID}}[3];}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00016}\mbox{\hyperlink{compute__axis__commands_8c_ac6595ac6fa25e26be6455e68cc6cdea9}{00016}} \textcolor{keywordtype}{float}   \mbox{\hyperlink{compute__axis__commands_8c_ac6595ac6fa25e26be6455e68cc6cdea9}{rateCmd}}[3];}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00017}00017 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00023}00023 \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00024}\mbox{\hyperlink{compute__axis__commands_8c_a6ea978441fb2878a2926d7009c903962}{00024}} \mbox{\hyperlink{compute__axis__commands_8c_a6ea978441fb2878a2926d7009c903962}{computeAxisCommands}}(\textcolor{keywordtype}{float} dt)}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00025}00025 \{}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00026}00026     \textcolor{keywordtype}{float} error;}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00028}00028     \textcolor{keywordflow}{if} (\mbox{\hyperlink{process__commands_8c_abdda914a8c6ac0445832f7dbf4f37286}{mode}} == \mbox{\hyperlink{_autodrone32_8h_ada81cad6f64bf0042dba36096bf32710a1e3af4a87374fcc9dcb397ee98b47b65}{FLIGHT}})}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00029}00029     \{}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00030}00030         \mbox{\hyperlink{compute__axis__commands_8c_aa2d7eed0bc462ac7393d0def9c484b5e}{attCmd}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}} ] = \mbox{\hyperlink{process__commands_8c_a1e10050fd5b2a267659f25847d7beb59}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}} ] * \mbox{\hyperlink{_autodrone32_8h_adda7ce5d0896385ad80c08bee2de8394}{eepromConfig}}.\mbox{\hyperlink{structeeprom_config__t_a9a08871f138cc5097ddd31faf2d37d7a}{attitudeScaling}};}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00031}00031         \mbox{\hyperlink{compute__axis__commands_8c_aa2d7eed0bc462ac7393d0def9c484b5e}{attCmd}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}]    = \mbox{\hyperlink{process__commands_8c_a1e10050fd5b2a267659f25847d7beb59}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}] * \mbox{\hyperlink{_autodrone32_8h_adda7ce5d0896385ad80c08bee2de8394}{eepromConfig}}.\mbox{\hyperlink{structeeprom_config__t_a9a08871f138cc5097ddd31faf2d37d7a}{attitudeScaling}};}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00032}00032         \mbox{\hyperlink{compute__axis__commands_8c_ac6595ac6fa25e26be6455e68cc6cdea9}{rateCmd}}[\mbox{\hyperlink{_autodrone32_8h_ac71b1e54b98dc1031873048bc61d0438}{YAW}} ] = \mbox{\hyperlink{process__commands_8c_a1e10050fd5b2a267659f25847d7beb59}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_ac71b1e54b98dc1031873048bc61d0438}{YAW}}  ] * \mbox{\hyperlink{_autodrone32_8h_adda7ce5d0896385ad80c08bee2de8394}{eepromConfig}}.\mbox{\hyperlink{structeeprom_config__t_a8f90af8f77a607661ad812a44bf427a4}{yawRateScaling}};}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00033}00033 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00034}00034         error = \mbox{\hyperlink{utilities_8c_a3eb5c7ac4a35ae17b26f4b67eec87eaf}{standardRadianFormat}}(\mbox{\hyperlink{compute__axis__commands_8c_aa2d7eed0bc462ac7393d0def9c484b5e}{attCmd}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}}] -\/ \mbox{\hyperlink{_autodrone32_8h_ae98e6f5c865af95578862f633a30b769}{sensors}}.\mbox{\hyperlink{structsensors__t_a648770241f13383e5c763d3d137e017e}{attitude500Hz}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}}]);}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00035}00035         \mbox{\hyperlink{compute__axis__commands_8c_ab07bd323d95ccecc4ad892c23b921712}{attPID}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}} ]  = \mbox{\hyperlink{pid_8c_acb47bee3fd9e9579d91fc045a7f87e8d}{updatePID}}(error, dt, \mbox{\hyperlink{pid_8c_a2411ec293e48a57a17a63d25e1c47907}{pidReset}}, \&\mbox{\hyperlink{_autodrone32_8h_adda7ce5d0896385ad80c08bee2de8394}{eepromConfig}}.\mbox{\hyperlink{structeeprom_config__t_ad725b40cda69d752a3ab6af73be69665}{PID}}[\mbox{\hyperlink{_autodrone32_8h_aa6cdf8ae8cfa8c94747830d9e0431643}{ROLL\_ATT\_PID}} ]);}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00036}00036         \mbox{\hyperlink{compute__axis__commands_8c_ac6595ac6fa25e26be6455e68cc6cdea9}{rateCmd}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}} ] = \mbox{\hyperlink{compute__axis__commands_8c_ab07bd323d95ccecc4ad892c23b921712}{attPID}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}} ];}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00037}00037 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00038}00038         error = \mbox{\hyperlink{utilities_8c_a3eb5c7ac4a35ae17b26f4b67eec87eaf}{standardRadianFormat}}(\mbox{\hyperlink{compute__axis__commands_8c_aa2d7eed0bc462ac7393d0def9c484b5e}{attCmd}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}] -\/ \mbox{\hyperlink{_autodrone32_8h_ae98e6f5c865af95578862f633a30b769}{sensors}}.\mbox{\hyperlink{structsensors__t_a648770241f13383e5c763d3d137e017e}{attitude500Hz}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}]);}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00039}00039         \mbox{\hyperlink{compute__axis__commands_8c_ab07bd323d95ccecc4ad892c23b921712}{attPID}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}] = \mbox{\hyperlink{pid_8c_acb47bee3fd9e9579d91fc045a7f87e8d}{updatePID}}(error, dt, \mbox{\hyperlink{pid_8c_a2411ec293e48a57a17a63d25e1c47907}{pidReset}}, \&\mbox{\hyperlink{_autodrone32_8h_adda7ce5d0896385ad80c08bee2de8394}{eepromConfig}}.\mbox{\hyperlink{structeeprom_config__t_ad725b40cda69d752a3ab6af73be69665}{PID}}[\mbox{\hyperlink{_autodrone32_8h_aa5049e31750ce30b89716ffca24dc90d}{PITCH\_ATT\_PID}}]);}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00040}00040         \mbox{\hyperlink{compute__axis__commands_8c_ac6595ac6fa25e26be6455e68cc6cdea9}{rateCmd}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}] = \mbox{\hyperlink{compute__axis__commands_8c_ab07bd323d95ccecc4ad892c23b921712}{attPID}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}];}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00042}00042 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00044}00044 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00045}00045         error = \mbox{\hyperlink{compute__axis__commands_8c_ac6595ac6fa25e26be6455e68cc6cdea9}{rateCmd}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}}] -\/ \mbox{\hyperlink{_autodrone32_8h_ae98e6f5c865af95578862f633a30b769}{sensors}}.\mbox{\hyperlink{structsensors__t_a096936016bc19288738dbf774d57d563}{gyro500Hz}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}}];}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00046}00046         \mbox{\hyperlink{compute__axis__commands_8c_ab77481ff9ad18ebb1f89ab1946ca7dae}{ratePID}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}}] = \mbox{\hyperlink{pid_8c_acb47bee3fd9e9579d91fc045a7f87e8d}{updatePID}}(error, dt, \mbox{\hyperlink{pid_8c_a2411ec293e48a57a17a63d25e1c47907}{pidReset}}, \&\mbox{\hyperlink{_autodrone32_8h_adda7ce5d0896385ad80c08bee2de8394}{eepromConfig}}.\mbox{\hyperlink{structeeprom_config__t_ad725b40cda69d752a3ab6af73be69665}{PID}}[\mbox{\hyperlink{_autodrone32_8h_a235532884e69e785781acb60c65bed49}{ROLL\_RATE\_PID}} ]);}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00047}00047 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00048}00048         error = \mbox{\hyperlink{compute__axis__commands_8c_ac6595ac6fa25e26be6455e68cc6cdea9}{rateCmd}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}] -\/ \mbox{\hyperlink{_autodrone32_8h_ae98e6f5c865af95578862f633a30b769}{sensors}}.\mbox{\hyperlink{structsensors__t_a096936016bc19288738dbf774d57d563}{gyro500Hz}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}];     \textcolor{comment}{// TODO check if this should be "{}+"{}}}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00049}00049         \mbox{\hyperlink{compute__axis__commands_8c_ab77481ff9ad18ebb1f89ab1946ca7dae}{ratePID}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}] = \mbox{\hyperlink{pid_8c_acb47bee3fd9e9579d91fc045a7f87e8d}{updatePID}}(error, dt, \mbox{\hyperlink{pid_8c_a2411ec293e48a57a17a63d25e1c47907}{pidReset}}, \&\mbox{\hyperlink{_autodrone32_8h_adda7ce5d0896385ad80c08bee2de8394}{eepromConfig}}.\mbox{\hyperlink{structeeprom_config__t_ad725b40cda69d752a3ab6af73be69665}{PID}}[\mbox{\hyperlink{_autodrone32_8h_a1958b73d2ee48b59a1c8f506881ee0f0}{PITCH\_RATE\_PID}}]);}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00050}00050 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00051}00051         error = \mbox{\hyperlink{compute__axis__commands_8c_ac6595ac6fa25e26be6455e68cc6cdea9}{rateCmd}}[\mbox{\hyperlink{_autodrone32_8h_ac71b1e54b98dc1031873048bc61d0438}{YAW}}] + \mbox{\hyperlink{_autodrone32_8h_ae98e6f5c865af95578862f633a30b769}{sensors}}.\mbox{\hyperlink{structsensors__t_a096936016bc19288738dbf774d57d563}{gyro500Hz}}[\mbox{\hyperlink{_autodrone32_8h_ac71b1e54b98dc1031873048bc61d0438}{YAW}}];}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00052}00052         \mbox{\hyperlink{compute__axis__commands_8c_ab77481ff9ad18ebb1f89ab1946ca7dae}{ratePID}}[\mbox{\hyperlink{_autodrone32_8h_ac71b1e54b98dc1031873048bc61d0438}{YAW}}] = \mbox{\hyperlink{pid_8c_acb47bee3fd9e9579d91fc045a7f87e8d}{updatePID}}(error, dt, \mbox{\hyperlink{pid_8c_a2411ec293e48a57a17a63d25e1c47907}{pidReset}}, \&\mbox{\hyperlink{_autodrone32_8h_adda7ce5d0896385ad80c08bee2de8394}{eepromConfig}}.\mbox{\hyperlink{structeeprom_config__t_ad725b40cda69d752a3ab6af73be69665}{PID}}[\mbox{\hyperlink{_autodrone32_8h_a8fea470ced437a1f4a6e41b1a30b0d05}{YAW\_RATE\_PID}}  ]);}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00053}00053 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00056}00056         \mbox{\hyperlink{mixer_8c_a819d556aa56c036590623a99955b0a7b}{throttleCmd}} = \mbox{\hyperlink{process__commands_8c_a1e10050fd5b2a267659f25847d7beb59}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_a96e6d6c3e78916bb163b52f0ea38ba68}{THROTTLE}}];}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00057}00057     \}}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00058}00058     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\mbox{\hyperlink{process__commands_8c_abdda914a8c6ac0445832f7dbf4f37286}{mode}} == \mbox{\hyperlink{_autodrone32_8h_ada81cad6f64bf0042dba36096bf32710a20364949ea9fb383c6b8baf4bf249c6a}{ROVER}})}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00059}00059     \{}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00060}00060         \mbox{\hyperlink{mixer_8c_aec1157580d2f27f5049e0093c2b1a84e}{speedCmd}} = \mbox{\hyperlink{process__commands_8c_a1e10050fd5b2a267659f25847d7beb59}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}];}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00061}00061         \mbox{\hyperlink{mixer_8c_a2cd3cf1f8b87bb342e3cbe4faaee86be}{steerCmd}} = \mbox{\hyperlink{process__commands_8c_a1e10050fd5b2a267659f25847d7beb59}{rxCommands}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}}];}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00062}00062     \}}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00064}00064 }
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00065}00065 \}}
\DoxyCodeLine{\Hypertarget{compute__axis__commands_8c_source_l00066}00066 }

\end{DoxyCode}
