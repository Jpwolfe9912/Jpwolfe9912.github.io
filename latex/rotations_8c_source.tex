\hypertarget{rotations_8c_source}{}\doxysection{rotations.\+c}
\label{rotations_8c_source}\index{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/motion/rotations.c@{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/motion/rotations.c}}
\mbox{\hyperlink{rotations_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00009}00009 \textcolor{comment}{/* Includes */}}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00010}00010 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{board_8h}{board.h}}"{}}}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00016}00016 \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00017}\mbox{\hyperlink{rotations_8c_a4adc96eb39842aa957a90bfd4ad2dfe9}{00017}} \mbox{\hyperlink{rotations_8c_a4adc96eb39842aa957a90bfd4ad2dfe9}{computeRotations500Hz}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00018}00018 \{}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00019}00019     arm\_matrix\_instance\_f32 a;}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00020}00020     arm\_matrix\_instance\_f32 b;}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00021}00021     arm\_matrix\_instance\_f32 x;}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00023}00023     \mbox{\hyperlink{mpu6000_8c_a09f05343283ca43390d2bd303416ac02}{computeMPU6000TCBias}}();}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00025}00025     \mbox{\hyperlink{mpu6000_8c_af3c6ca67b3fd82aae7d738d2dac4c79d}{nonRotatedAccelData}}[\mbox{\hyperlink{_autodrone32_8h_a5a899b303c8a64568d3744e2fd91d580}{XAXIS}}] = ((float)\mbox{\hyperlink{mpu6000_8c_a5a49a78cbbf03e6f554f7f45972c17da}{accelSummedSamples500Hz}}[\mbox{\hyperlink{_autodrone32_8h_a5a899b303c8a64568d3744e2fd91d580}{XAXIS}}] * 0.5f -\/ \mbox{\hyperlink{mpu6000_8c_ade31534035ac4fc1386d52ea7be9a269}{accelTCBias}}[\mbox{\hyperlink{_autodrone32_8h_a5a899b303c8a64568d3744e2fd91d580}{XAXIS}}]) * \mbox{\hyperlink{mpu6000_8h_a585dc9036243cba230705899afcf4348}{ACCEL\_SCALE\_FACTOR}};}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00026}00026     \mbox{\hyperlink{mpu6000_8c_af3c6ca67b3fd82aae7d738d2dac4c79d}{nonRotatedAccelData}}[\mbox{\hyperlink{_autodrone32_8h_a3e95c71037ba6d8d7a16e4501e15cefe}{YAXIS}}] = ((float)\mbox{\hyperlink{mpu6000_8c_a5a49a78cbbf03e6f554f7f45972c17da}{accelSummedSamples500Hz}}[\mbox{\hyperlink{_autodrone32_8h_a3e95c71037ba6d8d7a16e4501e15cefe}{YAXIS}}] * 0.5f -\/ \mbox{\hyperlink{mpu6000_8c_ade31534035ac4fc1386d52ea7be9a269}{accelTCBias}}[\mbox{\hyperlink{_autodrone32_8h_a3e95c71037ba6d8d7a16e4501e15cefe}{YAXIS}}]) * \mbox{\hyperlink{mpu6000_8h_a585dc9036243cba230705899afcf4348}{ACCEL\_SCALE\_FACTOR}};}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00027}00027     \mbox{\hyperlink{mpu6000_8c_af3c6ca67b3fd82aae7d738d2dac4c79d}{nonRotatedAccelData}}[\mbox{\hyperlink{_autodrone32_8h_aff84eb8d433e63ee955ed2bd48d6df77}{ZAXIS}}] = ((float)\mbox{\hyperlink{mpu6000_8c_a5a49a78cbbf03e6f554f7f45972c17da}{accelSummedSamples500Hz}}[\mbox{\hyperlink{_autodrone32_8h_aff84eb8d433e63ee955ed2bd48d6df77}{ZAXIS}}] * 0.5f -\/ \mbox{\hyperlink{mpu6000_8c_ade31534035ac4fc1386d52ea7be9a269}{accelTCBias}}[\mbox{\hyperlink{_autodrone32_8h_aff84eb8d433e63ee955ed2bd48d6df77}{ZAXIS}}]) * \mbox{\hyperlink{mpu6000_8h_a585dc9036243cba230705899afcf4348}{ACCEL\_SCALE\_FACTOR}};}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00029}00029     arm\_mat\_init\_f32(\&a, 3, 3, (\textcolor{keywordtype}{float} *)\mbox{\hyperlink{orientation_8c_a3dc49f4b46f57265f699543f15cb4299}{mpuOrientationMatrix}});}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00031}00031     arm\_mat\_init\_f32(\&b, 3, 1, (\textcolor{keywordtype}{float} *)\mbox{\hyperlink{mpu6000_8c_af3c6ca67b3fd82aae7d738d2dac4c79d}{nonRotatedAccelData}});}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00033}00033     arm\_mat\_init\_f32(\&x, 3, 1,          \mbox{\hyperlink{_autodrone32_8h_ae98e6f5c865af95578862f633a30b769}{sensors}}.\mbox{\hyperlink{structsensors__t_a300c0da2a8ccecb8d188fa5d988b9244}{accel500Hz}});}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00035}00035     arm\_mat\_mult\_f32(\&a, \&b, \&x);}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00037}00037     \mbox{\hyperlink{mpu6000_8c_ac06ab38f500b93844fb26bd1fa3a6f5c}{nonRotatedGyroData}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}} ] = ((float)\mbox{\hyperlink{mpu6000_8c_a10474e229ecbd68ab6c06e35efca291c}{gyroSummedSamples500Hz}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}}]  * 0.5f -\/ \mbox{\hyperlink{mpu6000_8c_a2f086a0eec38508f4d11b532552e51f9}{gyroRTBias}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}} ] -\/ \mbox{\hyperlink{mpu6000_8c_a8f989a8cbfaa7527db003cb247c21390}{gyroTCBias}}[\mbox{\hyperlink{_autodrone32_8h_af902416f65138704a180dbae2dc9d8f2}{ROLL}} ]) * \mbox{\hyperlink{mpu6000_8h_a9a726f5df52d7d55a122b9949686036d}{GYRO\_SCALE\_FACTOR}};}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00038}00038     \mbox{\hyperlink{mpu6000_8c_ac06ab38f500b93844fb26bd1fa3a6f5c}{nonRotatedGyroData}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}] = ((float)\mbox{\hyperlink{mpu6000_8c_a10474e229ecbd68ab6c06e35efca291c}{gyroSummedSamples500Hz}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}] * 0.5f -\/ \mbox{\hyperlink{mpu6000_8c_a2f086a0eec38508f4d11b532552e51f9}{gyroRTBias}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}] -\/ \mbox{\hyperlink{mpu6000_8c_a8f989a8cbfaa7527db003cb247c21390}{gyroTCBias}}[\mbox{\hyperlink{_autodrone32_8h_acd633835a520a62245ec6cfeb6d00e97}{PITCH}}]) * \mbox{\hyperlink{mpu6000_8h_a9a726f5df52d7d55a122b9949686036d}{GYRO\_SCALE\_FACTOR}};}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00039}00039     \mbox{\hyperlink{mpu6000_8c_ac06ab38f500b93844fb26bd1fa3a6f5c}{nonRotatedGyroData}}[\mbox{\hyperlink{_autodrone32_8h_ac71b1e54b98dc1031873048bc61d0438}{YAW}}  ] = ((float)\mbox{\hyperlink{mpu6000_8c_a10474e229ecbd68ab6c06e35efca291c}{gyroSummedSamples500Hz}}[\mbox{\hyperlink{_autodrone32_8h_ac71b1e54b98dc1031873048bc61d0438}{YAW}}]   * 0.5f -\/ \mbox{\hyperlink{mpu6000_8c_a2f086a0eec38508f4d11b532552e51f9}{gyroRTBias}}[\mbox{\hyperlink{_autodrone32_8h_ac71b1e54b98dc1031873048bc61d0438}{YAW}}  ] -\/ \mbox{\hyperlink{mpu6000_8c_a8f989a8cbfaa7527db003cb247c21390}{gyroTCBias}}[\mbox{\hyperlink{_autodrone32_8h_ac71b1e54b98dc1031873048bc61d0438}{YAW}}  ]) * \mbox{\hyperlink{mpu6000_8h_a9a726f5df52d7d55a122b9949686036d}{GYRO\_SCALE\_FACTOR}};}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00041}00041     arm\_mat\_init\_f32(\&a, 3, 3, (\textcolor{keywordtype}{float} *)\mbox{\hyperlink{orientation_8c_a3dc49f4b46f57265f699543f15cb4299}{mpuOrientationMatrix}});}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00042}00042 }
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00043}00043     arm\_mat\_init\_f32(\&b, 3, 1, (\textcolor{keywordtype}{float} *)\mbox{\hyperlink{mpu6000_8c_ac06ab38f500b93844fb26bd1fa3a6f5c}{nonRotatedGyroData}});}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00044}00044 }
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00045}00045     arm\_mat\_init\_f32(\&x, 3, 1,          \mbox{\hyperlink{_autodrone32_8h_ae98e6f5c865af95578862f633a30b769}{sensors}}.\mbox{\hyperlink{structsensors__t_a096936016bc19288738dbf774d57d563}{gyro500Hz}});}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00046}00046 }
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00047}00047     arm\_mat\_mult\_f32(\&a, \&b, \&x);}
\DoxyCodeLine{\Hypertarget{rotations_8c_source_l00048}00048 \}}

\end{DoxyCode}
