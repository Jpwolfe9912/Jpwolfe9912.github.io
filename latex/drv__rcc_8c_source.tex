\hypertarget{drv__rcc_8c_source}{}\doxysection{drv\+\_\+rcc.\+c}
\label{drv__rcc_8c_source}\index{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/drv/drv\_rcc.c@{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/drv/drv\_rcc.c}}
\mbox{\hyperlink{drv__rcc_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00010}00010 \textcolor{comment}{/* Includes */}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00011}00011 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{board_8h}{board.h}}"{}}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00012}00012 }
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00017}00017 \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00018}\mbox{\hyperlink{drv__rcc_8c_a014b986015eabce9cb0593c170b8cd19}{00018}} \mbox{\hyperlink{drv__rcc_8c_a014b986015eabce9cb0593c170b8cd19}{rcc216MHzInit}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00019}00019 \{}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00020}00020     RCC-\/>APB1ENR    |= RCC\_APB1ENR\_PWREN;}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00021}00021     PWR-\/>CR1        |= PWR\_CR1\_VOS;         \textcolor{comment}{// turn on voltage scaling}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00022}00022     PWR-\/>CR1        |= PWR\_CR1\_ODEN;        \textcolor{comment}{// enable overdrive}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00024}00024     RCC-\/>APB2ENR    |= RCC\_APB2ENR\_SYSCFGEN;}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00025}00025     FLASH-\/>ACR      |= FLASH\_ACR\_LATENCY\_7WS;       \textcolor{comment}{// set flash latency to 7 wait states}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00026}00026     \textcolor{keywordflow}{while}(!(FLASH-\/>ACR \& FLASH\_ACR\_LATENCY\_7WS))\{\}  \textcolor{comment}{// wait for enabled}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00029}00029     RCC-\/>CR         |= RCC\_CR\_HSEON;        \textcolor{comment}{// turn on HSI}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00030}00030     \textcolor{keywordflow}{while}(!(RCC-\/>CR \& RCC\_CR\_HSERDY))\{\}     \textcolor{comment}{// wait until HSI ready}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00031}00031 }
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00032}00032     \textcolor{comment}{/*      PLL Division Configuration  */}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00033}00033     \textcolor{comment}{/*      16 / 8 = 2 * 216 = 432 / 2 = 216    */}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00034}00034     RCC-\/>CR         \&= \string~RCC\_CR\_PLLON;}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00035}00035     RCC-\/>PLLCFGR    |= RCC\_PLLCFGR\_PLLSRC\_HSE;}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00036}00036     RCC-\/>PLLCFGR    \&= \string~RCC\_PLLCFGR\_PLLM;}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00037}00037     RCC-\/>PLLCFGR    |= 4U;                  \textcolor{comment}{// PLLM /8 div}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00038}00038     RCC-\/>PLLCFGR    |= (216U << 6U);        \textcolor{comment}{// PLLN *216 multi}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00039}00039     RCC-\/>PLLCFGR    \&= \string~RCC\_PLLCFGR\_PLLP;   \textcolor{comment}{// PLLP /2 div}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00040}00040     RCC-\/>CR         |= RCC\_CR\_PLLON;            \textcolor{comment}{// turn on PLL}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00041}00041     \textcolor{keywordflow}{while}(!(RCC-\/>CR \& RCC\_CR\_PLLRDY))\{\}     \textcolor{comment}{// wait for PLL to be ready}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00042}00042 }
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00043}00043     \textcolor{comment}{/*      CPU, AHB, APB Bus Configuration */}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00044}00044     RCC-\/>CFGR       |= RCC\_CFGR\_HPRE\_DIV1;  \textcolor{comment}{// AHB = 216MHz}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00045}00045     RCC-\/>CFGR       |= RCC\_CFGR\_PPRE1\_DIV4; \textcolor{comment}{// APB1 = 216 / 4 = 54MHz}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00046}00046     RCC-\/>CFGR       |= RCC\_CFGR\_PPRE2\_DIV2; \textcolor{comment}{// APB2 = 216 / 2 = 108MHz}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00047}00047     RCC-\/>CFGR       |= RCC\_CFGR\_SW\_PLL;     \textcolor{comment}{// PLL selected as system clock}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00048}00048     \textcolor{keywordflow}{while}(!(RCC-\/>CFGR \& RCC\_CFGR\_SWS\_PLL))\{\}\textcolor{comment}{// wait until selected}}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00049}00049 }
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00050}00050     \mbox{\hyperlink{group___s_t_m32_f7xx___system___private___variables_gaa3cd3e43291e81e795d642b79b6088e6}{SystemCoreClock}} = 216000000;}
\DoxyCodeLine{\Hypertarget{drv__rcc_8c_source_l00051}00051 \}}

\end{DoxyCode}
