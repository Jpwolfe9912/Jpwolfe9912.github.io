\hypertarget{drv__spi_8c}{}\doxysection{/\+Users/jeremywolfe/\+Documents/\+STM32\+Cube\+IDE/\+Autodrone32/\+Src/drv/drv\+\_\+spi.c File Reference}
\label{drv__spi_8c}\index{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/drv/drv\_spi.c@{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/drv/drv\_spi.c}}


This file initializes the SPI peripheral as well as writes and reads to another device over SPI.  


{\ttfamily \#include \char`\"{}board.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{drv__spi_8c_afdbacf07d926a145cc4d681c38980d03}{spi1\+Init}} (void)
\begin{DoxyCompactList}\small\item\em Initializes SPI1. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drv__spi_8c_ab223a09c3d0c71db42a9a8bbe2e388be}{spi\+Read\+Bytes}} (uint8\+\_\+t reg, uint8\+\_\+t $\ast$p\+Data, uint8\+\_\+t size)
\begin{DoxyCompactList}\small\item\em Reads multiple bytes of data in. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drv__spi_8c_a7d61fb36806c4e37a2bf675ba2d62008}{spi\+Write\+Bytes}} (uint8\+\_\+t $\ast$p\+Data, uint8\+\_\+t size)
\begin{DoxyCompactList}\small\item\em Writes multiple bytes of data in. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drv__spi_8c_a3573b135702ff18ce4852e27547c4968}{spi\+Read\+One\+Byte}} (uint8\+\_\+t reg, uint8\+\_\+t $\ast$p\+Data)
\begin{DoxyCompactList}\small\item\em Reads one byte of data in. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drv__spi_8c_aebb1dda4e95fbaba094d5beb79073279}{spi\+Write\+One\+Byte}} (uint8\+\_\+t reg, uint8\+\_\+t data)
\begin{DoxyCompactList}\small\item\em Writes one byte of data. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drv__spi_8c_aaf6ce196dde98712e1223b99766e06c0}{DMA2\+\_\+\+Stream0\+\_\+\+IRQHandler}} (void)
\begin{DoxyCompactList}\small\item\em This function handles DMA2 stream1 global interrupt. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{drv__spi_8c_a877135f6494d6923d6f6ec32d75d9eeb}{DMA2\+\_\+\+Stream3\+\_\+\+IRQHandler}} (void)
\begin{DoxyCompactList}\small\item\em This function handles DMA2 stream3 global interrupt. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file initializes the SPI peripheral as well as writes and reads to another device over SPI. 

Still needs to implement SPI2 for OSD chip Find a way to reuse write and read functions for SPI1 and SPI2

\begin{DoxyAuthor}{Author}
Jeremy Wolfe 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
23 FEB 2022 
\end{DoxyDate}


Definition in file \mbox{\hyperlink{drv__spi_8c_source}{drv\+\_\+spi.\+c}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{drv__spi_8c_aaf6ce196dde98712e1223b99766e06c0}\label{drv__spi_8c_aaf6ce196dde98712e1223b99766e06c0}} 
\index{drv\_spi.c@{drv\_spi.c}!DMA2\_Stream0\_IRQHandler@{DMA2\_Stream0\_IRQHandler}}
\index{DMA2\_Stream0\_IRQHandler@{DMA2\_Stream0\_IRQHandler}!drv\_spi.c@{drv\_spi.c}}
\doxysubsubsection{\texorpdfstring{DMA2\_Stream0\_IRQHandler()}{DMA2\_Stream0\_IRQHandler()}}
{\footnotesize\ttfamily void DMA2\+\_\+\+Stream0\+\_\+\+IRQHandler (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



This function handles DMA2 stream1 global interrupt. 



Definition at line \mbox{\hyperlink{drv__spi_8c_source_l00298}{298}} of file \mbox{\hyperlink{drv__spi_8c_source}{drv\+\_\+spi.\+c}}.

\mbox{\Hypertarget{drv__spi_8c_a877135f6494d6923d6f6ec32d75d9eeb}\label{drv__spi_8c_a877135f6494d6923d6f6ec32d75d9eeb}} 
\index{drv\_spi.c@{drv\_spi.c}!DMA2\_Stream3\_IRQHandler@{DMA2\_Stream3\_IRQHandler}}
\index{DMA2\_Stream3\_IRQHandler@{DMA2\_Stream3\_IRQHandler}!drv\_spi.c@{drv\_spi.c}}
\doxysubsubsection{\texorpdfstring{DMA2\_Stream3\_IRQHandler()}{DMA2\_Stream3\_IRQHandler()}}
{\footnotesize\ttfamily void DMA2\+\_\+\+Stream3\+\_\+\+IRQHandler (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



This function handles DMA2 stream3 global interrupt. 



Definition at line \mbox{\hyperlink{drv__spi_8c_source_l00320}{320}} of file \mbox{\hyperlink{drv__spi_8c_source}{drv\+\_\+spi.\+c}}.

\mbox{\Hypertarget{drv__spi_8c_afdbacf07d926a145cc4d681c38980d03}\label{drv__spi_8c_afdbacf07d926a145cc4d681c38980d03}} 
\index{drv\_spi.c@{drv\_spi.c}!spi1Init@{spi1Init}}
\index{spi1Init@{spi1Init}!drv\_spi.c@{drv\_spi.c}}
\doxysubsubsection{\texorpdfstring{spi1Init()}{spi1Init()}}
{\footnotesize\ttfamily void spi1\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Initializes SPI1. 

\begin{DoxyReturn}{Returns}
Void. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drv__spi_8c_source_l00021}{21}} of file \mbox{\hyperlink{drv__spi_8c_source}{drv\+\_\+spi.\+c}}.

\mbox{\Hypertarget{drv__spi_8c_ab223a09c3d0c71db42a9a8bbe2e388be}\label{drv__spi_8c_ab223a09c3d0c71db42a9a8bbe2e388be}} 
\index{drv\_spi.c@{drv\_spi.c}!spiReadBytes@{spiReadBytes}}
\index{spiReadBytes@{spiReadBytes}!drv\_spi.c@{drv\_spi.c}}
\doxysubsubsection{\texorpdfstring{spiReadBytes()}{spiReadBytes()}}
{\footnotesize\ttfamily void spi\+Read\+Bytes (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{reg,  }\item[{uint8\+\_\+t $\ast$}]{p\+Data,  }\item[{uint8\+\_\+t}]{size }\end{DoxyParamCaption})}



Reads multiple bytes of data in. 


\begin{DoxyParams}{Parameters}
{\em reg} & The hex value of the first register to read from. \\
\hline
{\em $\ast$p\+Data} & A pointer to location where you want to read data to. \\
\hline
{\em size} & The amount of bytes to be read. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Void. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drv__spi_8c_source_l00154}{154}} of file \mbox{\hyperlink{drv__spi_8c_source}{drv\+\_\+spi.\+c}}.

\mbox{\Hypertarget{drv__spi_8c_a3573b135702ff18ce4852e27547c4968}\label{drv__spi_8c_a3573b135702ff18ce4852e27547c4968}} 
\index{drv\_spi.c@{drv\_spi.c}!spiReadOneByte@{spiReadOneByte}}
\index{spiReadOneByte@{spiReadOneByte}!drv\_spi.c@{drv\_spi.c}}
\doxysubsubsection{\texorpdfstring{spiReadOneByte()}{spiReadOneByte()}}
{\footnotesize\ttfamily void spi\+Read\+One\+Byte (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{reg,  }\item[{uint8\+\_\+t $\ast$}]{p\+Data }\end{DoxyParamCaption})}



Reads one byte of data in. 


\begin{DoxyParams}{Parameters}
{\em reg} & The hex value of the register to read from. \\
\hline
{\em $\ast$p\+Data} & A pointer to location where you want to read data to. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Void. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drv__spi_8c_source_l00227}{227}} of file \mbox{\hyperlink{drv__spi_8c_source}{drv\+\_\+spi.\+c}}.

\mbox{\Hypertarget{drv__spi_8c_a7d61fb36806c4e37a2bf675ba2d62008}\label{drv__spi_8c_a7d61fb36806c4e37a2bf675ba2d62008}} 
\index{drv\_spi.c@{drv\_spi.c}!spiWriteBytes@{spiWriteBytes}}
\index{spiWriteBytes@{spiWriteBytes}!drv\_spi.c@{drv\_spi.c}}
\doxysubsubsection{\texorpdfstring{spiWriteBytes()}{spiWriteBytes()}}
{\footnotesize\ttfamily void spi\+Write\+Bytes (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{p\+Data,  }\item[{uint8\+\_\+t}]{size }\end{DoxyParamCaption})}



Writes multiple bytes of data in. 


\begin{DoxyParams}{Parameters}
{\em reg} & The hex value of the register to write to. \\
\hline
{\em $\ast$p\+Data} & A pointer to the data you want to write. \\
\hline
{\em size} & The amount of bytes to write. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Void. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drv__spi_8c_source_l00189}{189}} of file \mbox{\hyperlink{drv__spi_8c_source}{drv\+\_\+spi.\+c}}.

\mbox{\Hypertarget{drv__spi_8c_aebb1dda4e95fbaba094d5beb79073279}\label{drv__spi_8c_aebb1dda4e95fbaba094d5beb79073279}} 
\index{drv\_spi.c@{drv\_spi.c}!spiWriteOneByte@{spiWriteOneByte}}
\index{spiWriteOneByte@{spiWriteOneByte}!drv\_spi.c@{drv\_spi.c}}
\doxysubsubsection{\texorpdfstring{spiWriteOneByte()}{spiWriteOneByte()}}
{\footnotesize\ttfamily void spi\+Write\+One\+Byte (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{reg,  }\item[{uint8\+\_\+t}]{data }\end{DoxyParamCaption})}



Writes one byte of data. 


\begin{DoxyParams}{Parameters}
{\em reg} & The hex value of the register to write to. \\
\hline
{\em data} & The data to write. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Void. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{drv__spi_8c_source_l00261}{261}} of file \mbox{\hyperlink{drv__spi_8c_source}{drv\+\_\+spi.\+c}}.

