\hypertarget{drv__lwrb_8c}{}\doxysection{/\+Users/jeremywolfe/\+Documents/\+STM32\+Cube\+IDE/\+Autodrone32/\+Src/drv/drv\+\_\+lwrb.c File Reference}
\label{drv__lwrb_8c}\index{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/drv/drv\_lwrb.c@{/Users/jeremywolfe/Documents/STM32CubeIDE/Autodrone32/Src/drv/drv\_lwrb.c}}


This file is part of Lw\+RB -\/ Lightweight ring buffer library.  


{\ttfamily \#include $<$drv\+\_\+lwrb.\+h$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{drv__lwrb_8c_a6ab28cf70bc2c33340ab9fe19163c7a6}{BUF\+\_\+\+MEMSET}}~memset
\item 
\#define \mbox{\hyperlink{drv__lwrb_8c_a9f15e8de93f8a959775729bfc4633c68}{BUF\+\_\+\+MEMCPY}}~memcpy
\item 
\#define \mbox{\hyperlink{drv__lwrb_8c_abe74e5aa24961ae3389889264d1723e1}{BUF\+\_\+\+MAGIC1}}~(0x\+DEADBEEF)
\item 
\#define \mbox{\hyperlink{drv__lwrb_8c_af6cd8b6292064c38c7917a9a95bcbb9f}{BUF\+\_\+\+MAGIC2}}~($\sim$0x\+DEADBEEF)
\item 
\#define \mbox{\hyperlink{drv__lwrb_8c_aff2830b6e15344aa58a45e55f25b6db9}{BUF\+\_\+\+IS\+\_\+\+VALID}}(b)~((b) != NULL \&\& (b)-\/$>$buff != NULL \&\& (b)-\/$>$size $>$ 0)
\item 
\#define \mbox{\hyperlink{drv__lwrb_8c_a0a1e5b2d807776abf1104d37f8141099}{BUF\+\_\+\+MIN}}(x,  y)~((x) $<$ (y) ? (x) \+: (y))
\item 
\#define \mbox{\hyperlink{drv__lwrb_8c_a6c8e767a96387039c5b3602d61285340}{BUF\+\_\+\+MAX}}(x,  y)~((x) $>$ (y) ? (x) \+: (y))
\item 
\#define \mbox{\hyperlink{drv__lwrb_8c_ae6b44b4e80efd02f69db0693bf049a69}{BUF\+\_\+\+SEND\+\_\+\+EVT}}(b,  type,  bp)~do \{ if ((b)-\/$>$evt\+\_\+fn != NULL) \{ (b)-\/$>$evt\+\_\+fn((b), (type), (bp)); \} \} while (0)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga7906eb420b729bca01a6e1e4b318b432}{lwrb\+\_\+init}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, void $\ast$buffdata, size\+\_\+t size)
\begin{DoxyCompactList}\small\item\em Initialize buffer handle to default values with size and buffer data array. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___l_w_r_b_gaed50b99bdd5e8d10ae00658870a055e4}{lwrb\+\_\+is\+\_\+ready}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Check if buff is initialized and ready to use. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___l_w_r_b_ga0f0ec387056586a22ca37d7bd1ca6999}{lwrb\+\_\+free}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Free buffer memory. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___l_w_r_b_ga060fa8779e38b907ac5aa1f9fa07f3a3}{lwrb\+\_\+set\+\_\+evt\+\_\+fn}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, \mbox{\hyperlink{group___l_w_r_b_ga12e63728273a00ed1ad387e12ad6fd63}{lwrb\+\_\+evt\+\_\+fn}} evt\+\_\+fn)
\begin{DoxyCompactList}\small\item\em Set event function callback for different buffer operations. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_gac3674a7ac150c42ef96bd52667356cdb}{lwrb\+\_\+write}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, const void $\ast$data, size\+\_\+t btw)
\begin{DoxyCompactList}\small\item\em Write data to buffer. Copies data from {\ttfamily data} array to buffer and marks buffer as full for maximum {\ttfamily btw} number of bytes. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga894a7cb3b63e8b47e56ac91436de1c1c}{lwrb\+\_\+read}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, void $\ast$data, size\+\_\+t btr)
\begin{DoxyCompactList}\small\item\em Read data from buffer. Copies data from buffer to {\ttfamily data} array and marks buffer as free for maximum {\ttfamily btr} number of bytes. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga4c258cc0b134a8e98e875bab5974a972}{lwrb\+\_\+peek}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, size\+\_\+t skip\+\_\+count, void $\ast$data, size\+\_\+t btp)
\begin{DoxyCompactList}\small\item\em Read from buffer without changing read pointer (peek only) \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga774b76c9415642cb8bced066db8626fa}{lwrb\+\_\+get\+\_\+free}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Get available size in buffer for write operation. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_gac7d9434f9cc89380211ebb222c87dc80}{lwrb\+\_\+get\+\_\+full}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Get number of bytes currently available in buffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___l_w_r_b_ga8d50549538628161b6c4c6ee8289136d}{lwrb\+\_\+reset}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Resets buffer to default values. Buffer size is not modified. \end{DoxyCompactList}\item 
void $\ast$ \mbox{\hyperlink{group___l_w_r_b_ga7caa6f92eacf2e20b7a12c359ce1e1fa}{lwrb\+\_\+get\+\_\+linear\+\_\+block\+\_\+read\+\_\+address}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Get linear address for buffer for fast read. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_gabc3c54094858e86cb283a21bca5a1815}{lwrb\+\_\+get\+\_\+linear\+\_\+block\+\_\+read\+\_\+length}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Get length of linear block address before it overflows for read operation. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga10bbdb5343d3cd5a933996a0ce8c7a09}{lwrb\+\_\+skip}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, size\+\_\+t len)
\begin{DoxyCompactList}\small\item\em Skip (ignore; advance read pointer) buffer data Marks data as read in the buffer and increases free memory for up to {\ttfamily len} bytes. \end{DoxyCompactList}\item 
void $\ast$ \mbox{\hyperlink{group___l_w_r_b_gad8f5457e7da612e8dd55cd99472641be}{lwrb\+\_\+get\+\_\+linear\+\_\+block\+\_\+write\+\_\+address}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Get linear address for buffer for fast read. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga36f5716f2255914f3c7b97a83607366b}{lwrb\+\_\+get\+\_\+linear\+\_\+block\+\_\+write\+\_\+length}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff)
\begin{DoxyCompactList}\small\item\em Get length of linear block address before it overflows for write operation. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{group___l_w_r_b_ga4d726d2aee3d4db6d02de0fc6b489f0c}{lwrb\+\_\+advance}} (\mbox{\hyperlink{group___l_w_r_b_ga16515e22c2777482f3e7c88841bd787c}{lwrb\+\_\+t}} $\ast$buff, size\+\_\+t len)
\begin{DoxyCompactList}\small\item\em Advance write pointer in the buffer. Similar to skip function but modifies write pointer instead of read. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file is part of Lw\+RB -\/ Lightweight ring buffer library. 

\begin{DoxyAuthor}{Author}
Tilen MAJERLE \href{mailto:tilen@majerle.eu}{\texttt{ tilen@majerle.\+eu}} 
\end{DoxyAuthor}


Definition in file \mbox{\hyperlink{drv__lwrb_8c_source}{drv\+\_\+lwrb.\+c}}.



\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{drv__lwrb_8c_aff2830b6e15344aa58a45e55f25b6db9}\label{drv__lwrb_8c_aff2830b6e15344aa58a45e55f25b6db9}} 
\index{drv\_lwrb.c@{drv\_lwrb.c}!BUF\_IS\_VALID@{BUF\_IS\_VALID}}
\index{BUF\_IS\_VALID@{BUF\_IS\_VALID}!drv\_lwrb.c@{drv\_lwrb.c}}
\doxysubsubsection{\texorpdfstring{BUF\_IS\_VALID}{BUF\_IS\_VALID}}
{\footnotesize\ttfamily \#define BUF\+\_\+\+IS\+\_\+\+VALID(\begin{DoxyParamCaption}\item[{}]{b }\end{DoxyParamCaption})~((b) != NULL \&\& (b)-\/$>$buff != NULL \&\& (b)-\/$>$size $>$ 0)}



Definition at line \mbox{\hyperlink{drv__lwrb_8c_source_l00048}{48}} of file \mbox{\hyperlink{drv__lwrb_8c_source}{drv\+\_\+lwrb.\+c}}.

\mbox{\Hypertarget{drv__lwrb_8c_abe74e5aa24961ae3389889264d1723e1}\label{drv__lwrb_8c_abe74e5aa24961ae3389889264d1723e1}} 
\index{drv\_lwrb.c@{drv\_lwrb.c}!BUF\_MAGIC1@{BUF\_MAGIC1}}
\index{BUF\_MAGIC1@{BUF\_MAGIC1}!drv\_lwrb.c@{drv\_lwrb.c}}
\doxysubsubsection{\texorpdfstring{BUF\_MAGIC1}{BUF\_MAGIC1}}
{\footnotesize\ttfamily \#define BUF\+\_\+\+MAGIC1~(0x\+DEADBEEF)}



Definition at line \mbox{\hyperlink{drv__lwrb_8c_source_l00042}{42}} of file \mbox{\hyperlink{drv__lwrb_8c_source}{drv\+\_\+lwrb.\+c}}.

\mbox{\Hypertarget{drv__lwrb_8c_af6cd8b6292064c38c7917a9a95bcbb9f}\label{drv__lwrb_8c_af6cd8b6292064c38c7917a9a95bcbb9f}} 
\index{drv\_lwrb.c@{drv\_lwrb.c}!BUF\_MAGIC2@{BUF\_MAGIC2}}
\index{BUF\_MAGIC2@{BUF\_MAGIC2}!drv\_lwrb.c@{drv\_lwrb.c}}
\doxysubsubsection{\texorpdfstring{BUF\_MAGIC2}{BUF\_MAGIC2}}
{\footnotesize\ttfamily \#define BUF\+\_\+\+MAGIC2~($\sim$0x\+DEADBEEF)}



Definition at line \mbox{\hyperlink{drv__lwrb_8c_source_l00043}{43}} of file \mbox{\hyperlink{drv__lwrb_8c_source}{drv\+\_\+lwrb.\+c}}.

\mbox{\Hypertarget{drv__lwrb_8c_a6c8e767a96387039c5b3602d61285340}\label{drv__lwrb_8c_a6c8e767a96387039c5b3602d61285340}} 
\index{drv\_lwrb.c@{drv\_lwrb.c}!BUF\_MAX@{BUF\_MAX}}
\index{BUF\_MAX@{BUF\_MAX}!drv\_lwrb.c@{drv\_lwrb.c}}
\doxysubsubsection{\texorpdfstring{BUF\_MAX}{BUF\_MAX}}
{\footnotesize\ttfamily \#define BUF\+\_\+\+MAX(\begin{DoxyParamCaption}\item[{}]{x,  }\item[{}]{y }\end{DoxyParamCaption})~((x) $>$ (y) ? (x) \+: (y))}



Definition at line \mbox{\hyperlink{drv__lwrb_8c_source_l00051}{51}} of file \mbox{\hyperlink{drv__lwrb_8c_source}{drv\+\_\+lwrb.\+c}}.

\mbox{\Hypertarget{drv__lwrb_8c_a9f15e8de93f8a959775729bfc4633c68}\label{drv__lwrb_8c_a9f15e8de93f8a959775729bfc4633c68}} 
\index{drv\_lwrb.c@{drv\_lwrb.c}!BUF\_MEMCPY@{BUF\_MEMCPY}}
\index{BUF\_MEMCPY@{BUF\_MEMCPY}!drv\_lwrb.c@{drv\_lwrb.c}}
\doxysubsubsection{\texorpdfstring{BUF\_MEMCPY}{BUF\_MEMCPY}}
{\footnotesize\ttfamily \#define BUF\+\_\+\+MEMCPY~memcpy}



Definition at line \mbox{\hyperlink{drv__lwrb_8c_source_l00040}{40}} of file \mbox{\hyperlink{drv__lwrb_8c_source}{drv\+\_\+lwrb.\+c}}.

\mbox{\Hypertarget{drv__lwrb_8c_a6ab28cf70bc2c33340ab9fe19163c7a6}\label{drv__lwrb_8c_a6ab28cf70bc2c33340ab9fe19163c7a6}} 
\index{drv\_lwrb.c@{drv\_lwrb.c}!BUF\_MEMSET@{BUF\_MEMSET}}
\index{BUF\_MEMSET@{BUF\_MEMSET}!drv\_lwrb.c@{drv\_lwrb.c}}
\doxysubsubsection{\texorpdfstring{BUF\_MEMSET}{BUF\_MEMSET}}
{\footnotesize\ttfamily \#define BUF\+\_\+\+MEMSET~memset}



Definition at line \mbox{\hyperlink{drv__lwrb_8c_source_l00039}{39}} of file \mbox{\hyperlink{drv__lwrb_8c_source}{drv\+\_\+lwrb.\+c}}.

\mbox{\Hypertarget{drv__lwrb_8c_a0a1e5b2d807776abf1104d37f8141099}\label{drv__lwrb_8c_a0a1e5b2d807776abf1104d37f8141099}} 
\index{drv\_lwrb.c@{drv\_lwrb.c}!BUF\_MIN@{BUF\_MIN}}
\index{BUF\_MIN@{BUF\_MIN}!drv\_lwrb.c@{drv\_lwrb.c}}
\doxysubsubsection{\texorpdfstring{BUF\_MIN}{BUF\_MIN}}
{\footnotesize\ttfamily \#define BUF\+\_\+\+MIN(\begin{DoxyParamCaption}\item[{}]{x,  }\item[{}]{y }\end{DoxyParamCaption})~((x) $<$ (y) ? (x) \+: (y))}



Definition at line \mbox{\hyperlink{drv__lwrb_8c_source_l00050}{50}} of file \mbox{\hyperlink{drv__lwrb_8c_source}{drv\+\_\+lwrb.\+c}}.

\mbox{\Hypertarget{drv__lwrb_8c_ae6b44b4e80efd02f69db0693bf049a69}\label{drv__lwrb_8c_ae6b44b4e80efd02f69db0693bf049a69}} 
\index{drv\_lwrb.c@{drv\_lwrb.c}!BUF\_SEND\_EVT@{BUF\_SEND\_EVT}}
\index{BUF\_SEND\_EVT@{BUF\_SEND\_EVT}!drv\_lwrb.c@{drv\_lwrb.c}}
\doxysubsubsection{\texorpdfstring{BUF\_SEND\_EVT}{BUF\_SEND\_EVT}}
{\footnotesize\ttfamily \#define BUF\+\_\+\+SEND\+\_\+\+EVT(\begin{DoxyParamCaption}\item[{}]{b,  }\item[{}]{type,  }\item[{}]{bp }\end{DoxyParamCaption})~do \{ if ((b)-\/$>$evt\+\_\+fn != NULL) \{ (b)-\/$>$evt\+\_\+fn((b), (type), (bp)); \} \} while (0)}



Definition at line \mbox{\hyperlink{drv__lwrb_8c_source_l00052}{52}} of file \mbox{\hyperlink{drv__lwrb_8c_source}{drv\+\_\+lwrb.\+c}}.

